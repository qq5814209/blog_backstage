<!DOCTYPE html>
<html class="x-admin-sm">

<head>
    <meta charset="UTF-8">
    <title>项目管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi"/>
    <link rel="stylesheet" href="./css/font.css">
    <link rel="stylesheet" href="./css/xadmin.css">
    <script src="./lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="./js/xadmin.js"></script>
    <script src="./lib/layui/layui.js" charset="utf-8"></script>
</head>
<body>
<div class="layui-fluid">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-body ">
                    <form class="layui-form layui-col-space5">
                        <div class="layui-input-inline layui-show-xs-block">
                            <input type="text" name="ids" placeholder="编号" autocomplete="off" class="layui-input">
                        </div>
                        <div class="layui-input-inline layui-show-xs-block">
                            <input type="text" name="ids" placeholder="文章作者" autocomplete="off" class="layui-input">
                        </div>

                        <div class="layui-input-inline layui-show-xs-block">
                            <select name="contrller">
                                <option>发布时间</option>
                                <option>三天内</option>
                                <option>一星期内</option>
                                <option>一个月内</option>
                                <option>一个月后</option>
                            </select>
                        </div>

                        <div class="layui-input-inline layui-show-xs-block">
                            <select name="contrller">
                                <option>文章类型</option>
                                <option value="1">Java类</option>
                                <option value="2">PHP类</option>
                                <option value="3">数据库类</option>
                            </select>
                        </div>

                        <div class="layui-input-inline lafite_search layui-show-xs-block">
                            <button class="layui-btn" lay-submit="" lay-filter="sreach">
                                查询
                            </button>
                        </div>
                    </form>
                </div>


                <div class="layui-card-body">
                    <table class="layui-table layui-form" id="table2">
                        <thead>
                        <tr style="background: #F8E5E5;">
                            <th>文章ID</th>
                            <th>文章标题</th>
                            <th>文章类型</th>
                            <th>文章作者</th>
                            <th>发布时间</th>
<!--                            <th>评论数</th>-->
<!--                            <th>浏览量</th>-->
<!--                            <th>点赞数</th>-->
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody id="tbody1">
<!--                        <tr>-->
<!--                            <td>GZCS0001</td>-->
<!--                            <td>0325土地竞拍</td>-->
<!--                            <td>2016-10-08 13:00</td>-->
<!--                            <td>2016-10-08 13:00</td>-->
<!--                            <td>550000.00元</td>-->
<!--                            <td>550000.00元</td>-->
<!--                            <td>550000.00元</td>-->
<!--                            <td>暂存中</td>-->
<!--                            <td class="td-manage">-->
<!--                                <a class="lafitewu_look" title="查看" onclick="xadmin.open('编辑','project_edit.html')"-->
<!--                                   href="javascript:;">-->
<!--                                    编辑-->
<!--                                </a>-->
<!--                                <a class="lafitewu_del lafitewu_margin_left_10" title="删除"-->
<!--                                   onclick="member_del(this,'要删除的id')" href="javascript:;">-->
<!--                                    删除-->
<!--                                </a>-->
<!--                                <a class="lafitewu_auditing lafitewu_margin_left_10" title="发布"-->
<!--                                   onclick="member_revoke(this,'确认发布吗？')" href="javascript:;">-->
<!--                                    发布-->
<!--                                </a>-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>GZCS0001</td>-->
<!--                            <td>0325土地竞拍</td>-->
<!--                            <td>2016-10-08 13:00</td>-->
<!--                            <td>2016-10-08 13:00</td>-->
<!--                            <td>550000.00元</td>-->
<!--                            <td>550000.00元</td>-->
<!--                            <td>550000.00元</td>-->
<!--                            <td>公示中</td>-->
<!--                            <td class="td-manage">-->
<!--                                <a class="lafitewu_look" title="查看" onclick="xadmin.open('编辑','project_edit.html')"-->
<!--                                   href="javascript:;">-->
<!--                                    编辑-->
<!--                                </a>-->
<!--                                <a class="lafitewu_del lafitewu_margin_left_10" title="撤销"-->
<!--                                   onclick="member_revoke(this,'确认撤销吗？')" href="javascript:;">-->
<!--                                    撤销-->
<!--                                </a>-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td>GZCS0001</td>-->
<!--                            <td>0325土地竞拍</td>-->
<!--                            <td>2016-10-08 13:00</td>-->
<!--                            <td>2016-10-08 13:00</td>-->
<!--                            <td>550000.00元</td>-->
<!--                            <td>550000.00元</td>-->
<!--                            <td>550000.00元</td>-->
<!--                            <td>竞价中</td>-->
<!--                            <td class="td-manage">-->
<!--                                <a class="lafitewu_look" title="查看"-->
<!--                                   onclick="parent.xadmin.add_tab('项目详情','project_details.html')" href="javascript:;">-->
<!--                                    查看-->
<!--                                </a>-->
<!--                            </td>-->
<!--                        </tr>-->
                        </tbody>
                    </table>
                </div>
                <div class="layui-card-body ">
                    <div class="page">
                        <div>
                            <a class="prev" href="">&lt;&lt;</a>
                            <a class="num" href="">1</a>
                            <span class="current">2</span>
                            <a class="num" href="">3</a>
                            <a class="num" href="">489</a>
                            <a class="next" href="">&gt;&gt;</a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script src="/jquery/jquery-2.1.1.min.js"></script>
<script type="text/javascript">
    layui.use(['laydate', 'form'],
    function () {
        var laydate = layui.laydate;

        //执行一个laydate实例
        laydate.render({
            elem: '#start' //指定元素
        });

        //执行一个laydate实例
        laydate.render({
            elem: '#end' //指定元素
        });
    });

/*用户-删除*/
function member_del(obj, id) {
    layer.confirm('是否确认删除当前项目？',
        {title: "项目删除"},
        function (index) {
            //发异步删除数据
            $(obj).parents("tr").remove();
            layer.msg('已删除!', {
                icon: 1,
                time: 1000
            });
        });
}

/*用户-撤销*/
function member_revoke(obj, id) {
    layer.confirm('项目撤销后将不在农交网大厅显示！',
        {title: "项目撤销"},
        function (index) {
            //发异步删除数据
            // $(obj).parents("tr").remove();
            // layer.msg('已删除!', {
            //     icon: 1,
            //     time: 1000
            // });
        });
}

function getAllBlogInfo() {
    $.ajax({
        type: 'POST',
        url: "selectBlogInfo",
        contentType: "application/json",
        success: function (data) {
            //循环
            var tabObj = $("#table2");
            $(data).each(function (index, item) {
                var trHtml = "<tr><td>"+item.blog_id+"</td>" +
                    "<td>"+item.blog_title+"</td>\n" +
                    "<td>"+item.type_name+"</td>\n" +
                    "<td>"+item.name+"</td>\n" +
                    "<td>"+item.create_time+"</td>\n" +
                    // "<td>"+item.commentCount+"</td>\n" +
                    // "<td>"+item.browseCount+"</td>\n" +
                    // "<td>"+item.praiseCount+"</td>\n" +
                    "<td class=\"td-manage\">\n" +
                    // "<a class=\"lafitewu_look\" title=\"查看\" onclick=\"xadmin.open('编辑','project_edit.html')\" href=\"javascript:;\">\n" +
                    // "编辑\n" +
                    // "</a>\n" +
                    "<a class=\"lafitewu_look\" title=\"编辑\" onclick = \"jumpToEdit(" + item.blog_id +")\" href=\"javascript:;\">\n" +
                    "编辑\n" +
                    "</a>\n" +
                    "<a class=\"lafitewu_del lafitewu_margin_left_10\" title=\"删除\" onclick='deleteBlogInfoById(" + item.blog_id + ")' href=\"javascript:;\">\n" +
                    "删除\n" +
                    "</a>\n" +
                    // "<a class=\"lafitewu_auditing lafitewu_margin_left_10\" title=\"发布\" onclick=\"member_revoke(this,'确认发布吗？')\" href=\"javascript:;\">\n" +
                    // "发布    \n" +
                    // "</a>\n" +
                    "</td>" +
                    "</tr>";
                // console.log(trHtml); //  2pm
                //将字符串添加到table中
                tabObj.append(trHtml);
            });
        },
        error: function (data) {
            // console.error(data);

        },
        dataType: "json"
    });
    //2.遍历数据生成行
    //3.将行添加到table
}

getAllBlogInfo();


    function jumpToEdit(id) {
        var url = "project_edit.html?blog_id=" + id;
        window.location.href = url;
    }

    function deleteBlogInfoById(id) {
        $.ajax({
            type: 'GET',
            url: "deleteBlogInfoById?blog_id=" + id,
            contentType: "application/json",
            success: function (data) {
                if (data) {
                    alert("删除成功");
                    window.location.reload();
                } else {
                    alert("删除失败");
                }
            },
            error: function (data) {
                console.error(data);

            },
            dataType: "json"
        });
    }
</script>

</html>